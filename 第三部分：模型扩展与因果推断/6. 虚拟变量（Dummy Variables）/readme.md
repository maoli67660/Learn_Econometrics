# 📖 第六章 · 虚拟变量与分类变量回归（Dummy Variables and Categorical Regressors）

---

## 🎯 学习目标

- 理解什么是虚拟变量（Dummy Variable）
- 学会在回归模型中加入分类变量（如性别、城市、行业）
- 掌握虚拟变量的构造规则和参考组（baseline）逻辑
- 能解释虚拟变量的回归系数
- 理解虚拟变量与交互项的结合

---

## 🔹 6.1 什么是虚拟变量？

> 虚拟变量（Dummy Variable）是将分类变量转换为数值变量的方法，以便纳入回归模型。

---

### ✅ 举例：性别变量

原始数据：

| 人 | 性别 |
|----|------|
| A  | 男   |
| B  | 女   |
| C  | 男   |

构造虚拟变量：

```text
Gender_dummy = 1 if 男性  
              = 0 if 女性
```

线性回归模型：

```math
收入 = β₀ + β₁ × Gender_dummy + ε
```

---

## 🔹 6.2 如何解释虚拟变量的系数？

```math
Y_i = β₀ + β₁ × D_i + ε_i
```

其中：

- \( D_i \) 是虚拟变量（如性别，1=男，0=女）

### ✅ 解释方式：

- β₀：参考组（如女性）的平均 Y 值  
- β₁：与参考组的差值（如男性比女性高多少）

---

### 🧪 举例：性别对收入的影响

```math
收入 = 3000 + 800 × Gender_dummy
```

- β₀ = 3000 ⇒ 女性平均收入  
- β₁ = 800 ⇒ 男性比女性多 800 元

---

## 🔹 6.3 多类别变量的虚拟变量表示

若一个变量有 k 个类别，需要创建 k-1 个虚拟变量，保留一个类别作为参考组。

### ✅ 举例：地区变量（北京 / 上海 / 广州）

构造：

```text
D_北京 = 1 if 北京, else 0  
D_上海 = 1 if 上海, else 0  
（广州作为参考组）
```

模型：

```math
收入 = β₀ + β₁ × D_北京 + β₂ × D_上海 + ε
```

解释：

- β₀：广州的平均收入  
- β₁：北京相对广州的差距  
- β₂：上海相对广州的差距

---

## 🔹 6.4 虚拟变量陷阱（Dummy Variable Trap）

如果你为 k 个类别建了 k 个虚拟变量，模型会出现完美多重共线性。

### ❌ 错误写法：

```math
收入 = β₀ + β₁ × D_北京 + β₂ × D_上海 + β₃ × D_广州 + ε
```

因为：

```text
D_北京 + D_上海 + D_广州 = 1
```

变量线性相关 → 无法估计。

---

## 🔹 6.5 连续变量 × 虚拟变量：交互项

用于表示不同组的斜率不同（而不只是截距不同）

### ✅ 举例：

```math
收入 = β₀ + β₁ × 教育 + β₂ × 性别 + β₃ × 教育 × 性别 + ε
```

- β₁：女性的教育回报率  
- β₃：男性相比女性的教育回报差异

---

### 🧪 举例解释：

```math
收入 = 3000 + 500 × 教育 + 1000 × 男性 + 200 × 教育 × 男性
```

- 女性收入：\( 3000 + 500 × 教育 \)  
- 男性收入：\( 4000 + (500 + 200) × 教育 \)  
  ⇒ 男性基础收入高，教育回报更高

---

## 📝 小节总结（Summary）

| 知识点 | 要点 |
|--------|------|
| 虚拟变量 | 将分类变量转为 0/1 数值变量 |
| 解读方式 | 系数 = 与参考组的差值 |
| 多类别 | 用 k-1 个虚拟变量 |
| 虚拟变量陷阱 | 不可为所有类别都建变量 |
| 交互项 | 表示不同组的斜率差异 |

---

## 📦 Takeaway 知识点携带包

- 虚拟变量 = 分类变量的“数值通道”
- 解释时，始终对比“参考组”
- 多类别变量不能建全，要少一个
- 交互项可以建模“组内边际效应差异”

---

📌 第七章预告：我们将学习如何使用 **工具变量（Instrumental Variables, IV）** 来解决内生性偏误，让“相关 ≠ 因果”成为“相关 → 因果”。

